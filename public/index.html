<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<div id="root">


    <button v-on:click="flowers.sort(compare)">Sort</button>
    <ul>
        <li v-for="flower in flowers">{{ flower.name }} {{ flower.level }} {{flower.questionNumber}} {{flower.id}} <img :src="'img/' + flower.url" alt="" style="width: 100px"></li>
    </ul>



    <img src='img/blasippa.jpg' alt="">

    <div>


        <form>
            <label>{{answer}}</label>
            <input type="radio" value="{{answer}}" name="answer">
            <label>{{alt1}}</label>
            <input type="radio" value="{{alt1}}" name="alt1">
            <label>{{alt2}}</label>
            <input type="radio" value="{{alt2}}" name="alt2">
            <input type="submit" value="Submit">
        </form>

        <button v-on:click="getAlternatives">Start</button>


    </div>

</div>


<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>

<script>
    var app = new Vue({
        el: '#root',
        data: {
            question: 0,
            level: 1,
            flowers: [],
            alt1: "",
            alt2: "",
            answer: "",

        },
        mounted(){
            fetch('http://127.0.0.1:3000/api/flower/')
                .then((response) => {
                    return response.json();
                })
                .then((data) => {

                    this.flowers = data.flower;

                });
        },
        methods:{
            getFlower(){
                return this.flowers[1].name
            },
            getAlternatives(){

                if(this.flowers[this.question].level === this.level){
                    this.answer = this.flowers[this.question].name

                    this.alt1 = this.flowers[Math.floor(Math.random() * 10 * this.level)+1].name
                    this.alt2 = this.flowers[Math.floor(Math.random() * 10 * this.level)+1].name

                    if(this.alt1===this.alt2 || this.alt1 === this.answer || this.alt2 === this.answer){
                        this.getAlternatives()
                    }else{
                        this.question++
                    }
                }else {
                    this.question++
                    this.getAlternatives()
                }


            },
            compare(a,b){
                if(a.level < b.level){
                    return -1;
                }
                if(a.level > b.level){
                    return 1;
                }
                return 0;

            }

        }
    })

</script>
</body>
</html>